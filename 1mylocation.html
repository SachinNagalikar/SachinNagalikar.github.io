<!DOCTYPE >
<html>

<head>

    <title>My Location</title>
</head>

<body>
    <div id='root'></div>
    <script src="../js/react.development.js"></script>
    <script src="../js/react-dom.development.js"></script>
    <script src="../js/babel.js"></script>
    <script type="text/babel">
        const rootHandle=document.getElementById('root')
class Location extends React.Component{
    constructor(){
        super()
        this.state={
            temperature:0,
            latitude:0,
            longitude:0 
        }
    }



   LoactionHandle=()=>{
       if(navigator.geolocation){
         navigator.geolocation.getCurrentPosition((position)=> {
            let temperature=position.coords.temperature;
            let latitude = position.coords.latitude;
            let longitude= position.coords.longitude;
            console.log(latitude);
            console.log(longitude);
            this.setState({latitude,longitude})
           
        fetch(`https://api.darksky.net/forecast/9faac0d8b596ab1997a00d42550ed1ae/${this.state.latitude},${this.state.longitude}`)
        .then(responce => responce.json())
        .then((data) => {
            let celsius=(5/9)*(data.currently.temperature-32)
        this.setState((prevState)=>({temperature:celsius}))
})
})
}
}
    render(){
        return (<div>
        
        <h2>Location</h2>
    
        <button onClick={this.LoactionHandle}>Location</button>
        <h3> latitude is - ({this.state.latitude})</h3>
        <h3> longitude is - ({this.state.longitude})</h3>
        <h3>  temperature is - ({this.state.temperature})</h3>
<img src={`http://www.mapquestapi.com/staticmap/v5/map?key=HC5tjG1KDhKStcH5sEVFsKcpDRAAdlA8&type=map&size=225,160&locations=${this.state.latitude},${this.state.longitude}|marker-sm-50318A-1&scalebar=true&zoom=12&rand=279636994`} width="600" height="350"/>
        </div>
        )
    }
    }


        ReactDOM.render(<Location/>,rootHandle)
    </script>
</body>

</html>